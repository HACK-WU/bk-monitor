# 贡献流程

<cite>
**本文档引用的文件**  
- [CONTRIBUTING.md](file://bklog/CONTRIBUTING.md)
- [CONTRIBUTING_EN.md](file://bklog/CONTRIBUTING_EN.md)
- [CODE_OF_CONDUCT.md](file://bklog/CODE_OF_CONDUCT.md)
- [CODE_OF_CONDUCT_EN.md](file://bklog/CODE_OF_CONDUCT_EN.md)
- [docs/CONTRIBUTING.md](file://docs/CONTRIBUTING.md)
- [docs/wiki/specification/review.md](file://bklog/docs/wiki/specification/review.md)
- [docs/wiki/specification/review_en.md](file://bklog/docs/wiki/specification/review_en.md)
- [docs/wiki/community.md](file://bklog/docs/wiki/community.md)
</cite>

## 目录
1. [简介](#简介)
2. [报告问题与功能请求](#报告问题与功能请求)
3. [创建拉取请求](#创建拉取请求)
4. [代码审查流程](#代码审查流程)
5. [入门级任务建议](#入门级任务建议)
6. [社区行为准则](#社区行为准则)
7. [贡献者认可与维护者联系](#贡献者认可与维护者联系)
8. [贡献检查清单](#贡献检查清单)

## 简介

蓝鲸团队秉持开放的态度，欢迎志同道合的开发者共同参与项目贡献。本项目遵循MIT开源协议，所有贡献的代码均受此协议保护。在开始贡献之前，请仔细阅读本贡献流程文档，了解如何报告问题、提交功能请求、创建拉取请求以及参与代码审查等关键流程。

**文档来源**
- [CONTRIBUTING.md](file://bklog/CONTRIBUTING.md#L1-L74)
- [docs/CONTRIBUTING.md](file://docs/CONTRIBUTING.md#L1-L76)

## 报告问题与功能请求

蓝鲸团队使用GitHub Issues来追踪bug、特性需求和其他问题。在提交问题前，请先搜索已存在的类似issue，避免重复提交。

当确认发现新bug时，提交issue时请包含以下信息：
- 操作系统信息
- 使用的版本信息（如version、commitid）
- 问题发生时相关模块的日志输出
- 精确的复现步骤，建议提供复现脚本或工具

对于功能请求，欢迎随时通过[创建Issue](https://github.com/TencentBlueKing/bk-log/issues/new)的方式提出您的想法和需求，社区将在第一时间响应。

**文档来源**
- [CONTRIBUTING.md](file://bklog/CONTRIBUTING.md#L13-L25)
- [docs/wiki/community.md](file://bklog/docs/wiki/community.md#L1-L37)

## 创建拉取请求

拉取请求（Pull Request，简称PR）是本项目的主要工作方式。我们采用["fork and pull"](https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/getting-started/about-collaborative-development-models#fork-and-pull-model)的开发模式，即开发者首先向自己的fork仓库提交变更，然后向上游仓库发起PR。

### 提交步骤

1. fork代码仓库（首次操作）
2. 填写相关issue
3. 在个人仓库下创建分支进行开发，建议按"<分类>/<issue id>"命名，如：feature/#1
4. 进行开发，此阶段可根据开发进度设置commit
5. 完成自测，确保实现相关issue功能
6. 使用`git rebase`功能准备发起PR的commit，严格按照commit message规范填写提交信息
7. 向主仓库发起PR（标题默认使用commit message），并指定代码审查负责人
8. 根据CR意见修改代码。此阶段允许提交修复类小commit，一般使用`fixup:`作为commit前缀
9. CR通过后
10. PR提交者需将个人仓库下的fixup commit进行`git rebase`，确保只有一个commit
11. 仓库master角色完成merge（仓库仅开放rebase merging选项）
12. 关闭相关issue

### Git提交信息规范

提交信息需遵循以下格式：
```
git commit -m '标记: 提交的概要注释 issue #123'
```

**标记说明：**
| 标记 | 说明 |
| :--- | :---: |
| feature | 新特性 |
| bugfix | 不重要的修改（换行，拼写错误等） |
| optimization | 功能优化 |
| sprintfix | 未上线代码修改 （功能模块未上线部分bug） |
| refactor | 功能重构 |
| test | 增加测试代码 |
| docs | 编写文档 |
| merge | 分支合并及冲突解决 |

**文档来源**
- [CONTRIBUTING.md](file://bklog/CONTRIBUTING.md#L26-L76)
- [docs/CONTRIBUTING.md](file://docs/CONTRIBUTING.md#L28-L76)

## 代码审查流程

我们坚信代码审查的价值：不仅可以提高代码质量和可读性，还能不断提升开发者的水平和编码能力，促进更好的设计。

### 审查人员

蓝鲸团队希望积极参与项目的相关人员也是积极的审查者，同时期望审查者具备相关领域的专业知识，以提高处理效率。

### 审查细节

- PR/MR提交后，审查人员需快速分类，如关闭重复请求、识别简单用户错误、打标签，并确认由哪些具备专业知识的审查人员进行review
- 如果PR/MR被拒绝，审查人员需向发起者提供足够反馈，解释关闭原因
- 审查过程中，PR/MR发起者应积极回答审查人员疑问，进行评论，必要时对提交内容进行合理调整
- 审查人员应在工作日内及时处理PR/MR，非工作日处理可能会有所延迟

### 持有PR/MR

如果审查人员因时间关系无法立即处理，建议在PR/MR讨论中反馈处理时间。PR/MR作者应与审查人员积极协商合理截止日期，或协商PR/MR交接给其他专业审查人员。

### 合并标准

PR/MR满足以下标准时会被合并：
- 审查人员没有提出反对或整改意见
- 所有反对或调整建议已合理处理
- 至少有一个分支的维护者赞成合入
- 具备相关的文档和测试

**文档来源**
- [docs/wiki/specification/review.md](file://bklog/docs/wiki/specification/review.md#L1-L49)
- [docs/wiki/specification/review_en.md](file://bklog/docs/wiki/specification/review_en.md#L1-L42)

## 入门级任务建议

对于新贡献者，建议从以下类型的任务开始：
- 修复文档中的描述错误或标点符号
- 修复源码中明显的bug
- 优化代码中的可读性问题
- 完善测试用例
- 修复拼写错误或格式问题

建议先通过[创建Issue](https://github.com/TencentBlueKing/bk-log/issues/new)与社区沟通您的想法，然后再开始工作。对于源代码修改的PR，建议先创建一个Issue与社区讨论。

**文档来源**
- [docs/wiki/community.md](file://bklog/docs/wiki/community.md#L1-L37)

## 社区行为准则

为建设开放友好的环境，我们承诺：不论年龄、体型、身体健全与否、民族、性征、性别认同与表征、经验水平、教育程度、社会地位、国籍、相貌、种族、信仰、性取向，项目和社区的参与者皆免于骚扰。

### 积极行为包括
- 措辞友好且包容
- 尊重不同的观点和经验
- 耐心接受有益批评
- 关注对社区最有利的事情
- 与社区其他成员友善相处

### 禁止行为包括
- 发布与性有关的言论或图像、不受欢迎地献殷勤
- 捣乱/煽动/造谣行为、侮辱/贬损的评论、人身及政治攻击
- 公开或私下骚扰
- 未经明确授权便发布他人的资料，如住址、电子邮箱等
- 其他有理由认定为违反职业操守的不当行为

违反行为准则的行为可报告给BK-LOG的维护团队，维护团队将审议并调查全部投诉，妥善予以回应，并保密举报者信息。

**文档来源**
- [CODE_OF_CONDUCT.md](file://bklog/CODE_OF_CONDUCT.md#L1-L50)
- [CODE_OF_CONDUCT_EN.md](file://bklog/CODE_OF_CONDUCT_EN.md#L1-L98)

## 贡献者认可与维护者联系

我们感谢每一位贡献者的辛苦付出。通过提交PR，您可以将想法和需求合入社区主线版本。项目维护者有义务诠释妥当行为，并纠正不当行为；有权删除、编辑、拒绝违背行为标准的贡献；可暂时或永久封禁行为不当的参与者。

更多交流方式，请参见社区文档中的联系方式。您也可以点击bk-log仓库上方的**Watch**按钮实时跟踪社区动态。

**文档来源**
- [docs/wiki/community.md](file://bklog/docs/wiki/community.md#L1-L37)
- [CODE_OF_CONDUCT.md](file://bklog/CODE_OF_CONDUCT.md#L24-L49)

## 贡献检查清单

为确保您的贡献符合项目标准，请在提交前核对以下清单：

- [ ] 已fork代码仓库
- [ ] 已创建相关issue
- [ ] 已在个人仓库创建分支（命名规范："<分类>/<issue id>"）
- [ ] 已完成开发和自测
- [ ] 已使用`git rebase`整理commit，确保提交历史清晰
- [ ] commit message符合规范（格式：'标记: 提交概要 issue #123'）
- [ ] 已向主仓库发起PR，并指定审查负责人
- [ ] 已根据CR意见修改代码（使用`fixup:`前缀提交修复commit）
- [ ] CR已通过
- [ ] 已将fixup commit rebase为单个commit
- [ ] 已确保有相关文档和测试
- [ ] 在PR合并后将关闭相关issue

遵循以上流程，您将能够成功为项目做出贡献。

**文档来源**
- [CONTRIBUTING.md](file://bklog/CONTRIBUTING.md#L26-L49)
- [docs/CONTRIBUTING.md](file://docs/CONTRIBUTING.md#L28-L49)